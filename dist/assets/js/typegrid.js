!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}},function(e,t,i){"use strict";i.r(t);var n={};i.r(n),i.d(n,"debug",(function(){return d})),i.d(n,"msg",(function(){return c})),i.d(n,"lib",(function(){return a})),i.d(n,"console",(function(){return l})),i.d(n,"attr",(function(){return h})),i.d(n,"aria",(function(){return g})),i.d(n,"style",(function(){return f})),i.d(n,"styleBase",(function(){return m})),i.d(n,"sizes",(function(){return y})),i.d(n,"num",(function(){return v})),i.d(n,"color",(function(){return p})),i.d(n,"elem",(function(){return w}));var r={};i.r(r),i.d(r,"tgFilePathOrigin",(function(){return b}));var u={};i.r(u),i.d(u,"getJSON",(function(){return _})),i.d(u,"deviceDecision",(function(){return k})),i.d(u,"media",(function(){return z})),i.d(u,"wrapper",(function(){return S})),i.d(u,"calcScrollbarWidth",(function(){return x})),i.d(u,"checkBrowserHeight",(function(){return A})),i.d(u,"setWrapperHeight",(function(){return E})),i.d(u,"width",(function(){return M})),i.d(u,"height",(function(){return C})),i.d(u,"ua",(function(){return j})),i.d(u,"getElementTagStyle",(function(){return H})),i.d(u,"convertHex",(function(){return O})),i.d(u,"convertComputedFontSize",(function(){return B})),i.d(u,"getStyles",(function(){return P})),i.d(u,"decisionGutterSideType",(function(){return W})),i.d(u,"decisionColumnSizeType",(function(){return T})),i.d(u,"setSvgSizes",(function(){return L})),i.d(u,"reset",(function(){return I})),i.d(u,"wrapperFit",(function(){return N})),i.d(u,"insertStyleElem",(function(){return Q})),i.d(u,"resize",(function(){return D})),i.d(u,"listenMediaQueries",(function(){return F})),i.d(u,"unlistenMediaQueries",(function(){return J})),i.d(u,"checkWindowSize",(function(){return R})),i.d(u,"uncheckWindowSize",(function(){return V})),i.d(u,"keyBinds",(function(){return G}));var o=i(0),s=i.n(o),d={count:{resize:0},msg:{default:"テストだよ。",resize:"リサイズしたよ。",load:"ロードだよ。",model:"modelだよ。",view:"viewだよ。",controller:"controllerだよ。",err:{deviceDicision:'Please set "@media" or "userAgent" to general.deviceDecision of typegrid.json.'},attention:{deviceDecision:"Current typegrid.js does not support user agent judgment."}}},c={get:{notfound:"Can not find typegrid.json. Please put it in the same directory as typegrid.js. Please check if there is any problem with the structure of json when placing :)"}},a={name:"typegrid.js",prefix:"tg_",json:{file:"typegrid.json",storage:"typegrid_json"}},l={red:"color:#f00;",green:"color:#0f0;",blue:"color:#00f;"},h={svg:{ns:"http://www.w3.org/2000/svg",width:100}},g={presen:"role='presentation'",hidden:"aria-hidden='true'"},f={mode:"horizontal-tb",pointerEvents:"pointer-events: none;"},m='\n#tg_all {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 99900;\n    width: 100%;\n    max-width: 100%;\n    height: auto;\n    min-height: 100%;\n    overflow: hidden;\n    font-feature-settings: "palt";\n    pointer-events: none;\n}\n#tg_originForWidth {\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    width: calc(100vw - 100%);\n    height: 1px;\n    opacity: 0;\n}\n#tg_wrapper {\n    pointer-events: none;\n}\n#tg_ruler {\n    width: 100%;\n    min-width: 100%;\n}\n#tg_ruler, #tg_setting, #tg_gui {\n    pointer-events: auto;\n\n}\n',y={test:280,char:16,gutter:2},v={grid:1,unit:1,guide:1,char:1},p={grid:"#cccccc"},w={wrapper:{html:"<div id='tg_wrapper'><svg id='tg_grid'><g id='tg_base'><g id='tg_base__body'></g></g><g id='tg_unit'><g id='tg_unit__body'></g></g><g id='tg_sizes'><g id='tg_sizes__body'></g></g><g id='tg_chars'><g id='tg_chars__body'></g></g><g id='tg_layout'><g id='tg_layout__body'></g></g><g id='tg_row'><g id='tg_row__body'></g></g><g id='tg_rhythm'><g id='tg_rhythm__body'></g></g></svg></div><div id='tg_ruler'><div id='tg_ruler__body'></div></div><div id='tg_settings'></div><div id='tg_gui'><div id='tg_gui__body></div></div>"}};function b(){return function(){if(document.currentScript)return document.currentScript.src;var e=document.getElementsByTagName("script"),t=e[e.length-1];return t.src?t.src:void 0}()}function _(e){return n[e]}function k(e,t,i,n,r){var u=e;"@media"===u&&this.media(t,i)}function z(e,t){for(var i=t,n=[],r="screen",u="min-width: ",o="max-width: ",s=0;s<i.length;s++);i.some((function(e,t){0==t?n.push(r+" and ("+o+(i[t+1]-1)+"px)"):t==i.length-1?n.push(r+" and ("+u+e+"px)"):n.push(r+" and ("+o+(i[t+1]-1)+"px) and ("+u+i[t]+"px)")}));for(var d=0;d<n.length;d++);var c=[].concat(n);return c.some((function(e,t){c[t]=c[t].replace(/\s+/g,"")})),c}function S(e){var t=document.createElement("div"),i=document.getElementsByTagName("body").item(0);t.setAttribute("id","tg_all"),t.setAttribute("role","presentation"),t.setAttribute("aria-hidden","true"),i.appendChild(t),t.innerHTML=e}function x(){var e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}function A(){var e=Math.max,t=e(window.innerHeight,document.documentElement.clientHeight),i=(document.body.offsetHeight,document.body.clientHeight);return t<e(document.body.scrollHeight,i)}function E(){var e=document.getElementById("tg_wrapper"),t=C()+"px";e.style.height=t}function M(){return window.innerWidth||document.documentElement.clientWidth||0}function C(){return Math.max.apply(null,[window.innerHeight,document.documentElement.clientHeight,document.body.offsetHeight,document.body.clientHeight,document.body.scrollHeight])}function j(){var e=navigator.userAgent;0<e.indexOf("iPhone")||0<e.indexOf("Android")&&0<e.indexOf("Mobile")?(e.indexOf("iPhone"),e.indexOf("Android")):(0<e.indexOf("iPad")||0<e.indexOf("Android"))&&(e.indexOf("iPad"),e.indexOf("Android"),__logger("Android"))}function H(e){var t=e,i=document.getElementsByTagName(t).item(0);return window.getComputedStyle(i)}function O(e){for(var t,i=/rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),?\s*([.\d]+)?\)/.exec(e),n="",r=1;3>=r;r++)n+=1===(t=(+i[r]).toString(16)).length?"0"+t:t;return n}function B(e,t){var i=e;if("computed"===i){var n=H(t);return parseFloat(n.fontSize)}return i}function P(e){H(e)}function W(e,t){return"auto"===e?0:e*t}function T(e,t,i,n,r,u){return"fluid"===t?(i-r)/n-u:e*t-u}function L(e,t,i){var n=document.getElementById(e),r=t,u=i;n.setAttribute("width",r),n.setAttribute("height",u),n.setAttribute("viewbox","0 0 "+r+" "+u)}function I(e){e.textContent=null}function N(){}function Q(e){var t=document.createElement("style"),i=document.getElementById("tg_all"),n=document.createTextNode(e);t.setAttribute("id","tg_style"),t.styleSheet?t.styleSheet.cssText=n.nodeValue:t.appendChild(n),i.appendChild(t)}function D(e,t){window.addEventListener("resize",(function(){clearTimeout(i),i=setTimeout((function(){++e.debug.count.resize,t.render("resize")}),300)}),!1);var i=null}function F(e,t,i){var n=this,r=e.user.media.contents.breakPoints.width.min,u=(e.user.media.devices,e.user.general.unit.breakPoints),o=-1,s=[],d=function(e){if(e.matches){var t=e.target?e.target.typegridIndex:e.typegridIndex;if(!isNaN(t)&&o!==t)return t}return-1};n.mediaQueryListener=function(e){var t=d(e);-1<t&&function(e){i(o=e)}(t)},r.forEach((function(t,i,r){if(s[i]=window.matchMedia(["screen and (min-width: "+(t+u)+")",r[i+1]?" and (max-width:"+(r[i+1]-1+u)+")":""].join("")),s[i].typegridIndex=i,s[i].addListener(n.mediaQueryListener),s[i].matches){var o=d(s[i]);-1<o&&(n.currentMedia=e.getJsonValues(o))}})),n.mediaQueries=s}function J(){var e=this;return!!e.mediaQueries&&(e.mediaQueries.forEach((function(t){t.removeListener(e.mediaQueryListener)})),!0)}function R(e,t,i){var n=this;n.timerResize=-1,n.resizeWindowListener=function(){-1===n.timerResize&&(n.timerResize=setTimeout((function(){++e.debug.count.resize,i(),clearTimeout(n.timerResize),n.timerResize=-1}),300))},window.addEventListener("resize",n.resizeWindowListener,!1)}function V(){return!!this.resizeWindowListener&&(window.removeEventListener("resize",this.resizeWindowListener,!1),!0)}function G(e){var t=e.visibility,i=e.fixed,n=document.getElementById("tg_all");document.body.addEventListener("keydown",(function(e){"g"===e.key&&(t=!t,n.style.display=1==t?"block":"none"),"p"===e.key&&(n.style.position=1==i?"fixed":"absolute",i=!i)}))}var q=i(1),K=i.n(q),U=function(){function e(t,i){s()(this,e),this.config=i,this.utils=t,this.user=this.utils.getJSON(this.config.lib.json.storage),this.devices=this.user.media.devices,this.fontSize=this.user.media.contents.fontSize,this.visibility=this.user.general.visibility,this.fixed=this.user.general.fixed,this.scrollbarWidth=this.utils.calcScrollbarWidth(),this.debug=i.debug,this.msg=i.msg,this.lib=i.lib,this.console=i.console,this.attr=i.attr,this.aria=i.aria,this.style=i.style,this.sizes=i.sizes,this.num=i.num,this.color=i.color,this.elem=i.elem,this.width(),this.height(),this.ua(),this.keyboard(),this.size(),this.getStyle()}return K()(e,[{key:"getJsonValues",value:function(e){var t=this.user.media;return{devices:t.devices[e],contents:{writingMode:t.contents.writingMode[e],fontSize:t.contents.fontSize[e],lineHeight:t.contents.lineHeight[e],letterSpacing:t.contents.letterSpacing[e],breakPoints:{width:{min:t.contents.breakPoints.width.min[e]}},gutter:t.contents.gutter[e]},grids:{base:{num:t.grids.base.num[e],gutter:t.grids.base.gutter[e]},column:{num:t.grids.column.num[e],sizeChar:t.grids.column.sizeChar[e],gutter:t.grids.column.gutter[e]},row:{height:t.grids.row.height[e],gutter:t.grids.row.gutter[e]},unit:{num:t.grids.unit.num[e],gutter:t.grids.unit.gutter[e]}}}}},{key:"deviceDecision",value:function(e){var t=e;"@media"===t&&this.media(this.user.media.devices,this.user.media.contents.breakPoints.width.min)}},{key:"media",value:function(){}},{key:"width",value:function(){var e,t=this.utils.checkBrowserHeight(),i=this.scrollbarWidth,n=this.utils.width();return 1==t?e=n-i:e=n,e}},{key:"height",value:function(){return this.utils.height()}},{key:"wrapperHeight",value:function(){return this.utils.setWrapperHeight()}},{key:"ua",value:function(){this.utils.ua()}},{key:"base",value:function(){}},{key:"unit",value:function(){}},{key:"layout",value:function(){}},{key:"row",value:function(){}},{key:"rhythm",value:function(){}},{key:"ruler",value:function(){}},{key:"guide",value:function(){}},{key:"gui",value:function(){}},{key:"keyboard",value:function(){}},{key:"size",value:function(){}},{key:"getStyle",value:function(){this.utils.getStyles("html")}}]),e}(),X=function(){function e(t,i){s()(this,e),this.utils=t,this.model=i}return K()(e,[{key:"wrapper",value:function(e,t){this.utils.wrapper(e,t)}},{key:"reset",value:function(e){this.utils.reset(e)}},{key:"visibility",value:function(){var e=this.model.visibility,t=document.getElementById("tg_all");!0===e?t.setAttribute("style","display: block"):t.setAttribute("style","display: none")}},{key:"render",value:function(e,t){var i=e;if("init"===i){this.wrapper(this.model.elem.wrapper.html,this.model),this.model.wrapperHeight(),this.visibility(),this.utils.insertStyleElem(this.model.config.styleBase),this.utils.setSvgSizes("tg_grid",this.model.width(),this.utils.height()),this.currentMedia=this.utils.currentMedia;try{delete this.utils.currentMedia}catch(e){window.console.log(e)}this.render("resize")}else if("resize"===i){var n=this.utils.convertComputedFontSize(this.currentMedia.contents.fontSize,"html"),r=this.currentMedia.contents.lineHeight,u=this.model.width(),o=this.utils.height();this.model.wrapperHeight();var s=this.currentMedia.grids.column.num,d=this.currentMedia.grids.column.sizeChar,c=this.currentMedia.grids.row.height,a=this.currentMedia.grids.row.gutter,l=this.currentMedia.grids.column.gutter,h=this.currentMedia.contents.gutter;this.utils.setSvgSizes("tg_grid",u,o),this.rhythm(n,r,u,o),this.row(n,r,u,o,c,a),this.layout(n,u,o,s,d,l,h),this.base(),this.unit()}else"change"===i?this.unit():"media"===i&&(this.rhythm(),this.currentMedia=this.model.getJsonValues(t))}},{key:"grid",value:function(){type={init:function(){},resize:function(){},media:function(){}}}},{key:"base",value:function(){}},{key:"unit",value:function(){}},{key:"layout",value:function(e,t,i,n,r,u,o){var s=e,d=t,c=n,a=e*u,l=a*c-a,h=this.utils.decisionGutterSideType(o,s),g=this.utils.decisionColumnSizeType(s,r,d,c,l,2*h/c),f=document.getElementById("tg_layout__body");this.reset(f);for(var m=document.createDocumentFragment(),y=0;y<c;y++){var v=document.createElementNS("http://www.w3.org/2000/svg","rect"),p=document.createElementNS("http://www.w3.org/2000/svg","text");v.setAttribute("class","rect-x"+y),v.setAttribute("x",a*y+y*g+(d-(l+g*c))/2),v.setAttribute("y","0"),v.setAttribute("width",g),v.setAttribute("height",i),v.setAttribute("fill","#ff0000"),v.setAttribute("fill-opacity",.125),v.setAttribute("stroke","#ff0000"),v.setAttribute("stroke-opacity",.5),p.appendChild(v),m.appendChild(v)}f.appendChild(m)}},{key:"row",value:function(e,t,i,n,r,u){var o=e,s=r,d=u,c=parseInt(n/((s+d)*o)+1),a=document.getElementById("tg_row__body");this.reset(a);for(var l,h=document.createDocumentFragment(),g=0;g<c;g++){(l=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("class","row-y"+g),l.setAttribute("x","0");var f=g*s*o,m=g*d*o;l.setAttribute("y",parseInt(f+m)),l.setAttribute("width",i),l.setAttribute("height",s*o),l.setAttribute("fill","#ff0000"),l.setAttribute("fill-opacity",.125),l.setAttribute("stroke","#ff0000"),l.setAttribute("stroke-opacity",.5),h.appendChild(l)}a.appendChild(h)}},{key:"rhythm",value:function(e,t,i,n){var r=e,u=t,o=parseInt(n/r*u),s=document.getElementById("tg_rhythm__body");this.reset(s);for(var d,c=document.createDocumentFragment(),a=0;a<o;a++)(d=document.createElementNS("http://www.w3.org/2000/svg","line")).setAttribute("class","line-y"+a),d.setAttribute("x1","0"),d.setAttribute("y1",a*r*u/2),d.setAttribute("x2",i),d.setAttribute("y2",a*r*u/2),d.setAttribute("fill","none"),d.setAttribute("stroke","#999999"),d.setAttribute("stroke-width",.5),d.setAttribute("stroke-opacity",.75),c.appendChild(d);s.appendChild(c)}},{key:"ruler",value:function(){}},{key:"guide",value:function(){}},{key:"gui",value:function(){}},{key:"keyboard",value:function(){}},{key:"size",value:function(){}}]),e}(),Y=function(){function e(t,i,n){s()(this,e),this.utils=t,this.model=i,this.view=n,this.media(),this.init(),this.resize(),this.keyBinds(this.model,this.view)}return K()(e,[{key:"init",value:function(){var e=this,t=function(){e.view.render("init")};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}},{key:"media",value:function(){var e=this;e.utils.listenMediaQueries(e.model,e.view,(function(t){e.view.render("media",t)}))}},{key:"resize",value:function(){var e=this;e.utils.checkWindowSize(e.model,e.view,(function(){e.view.render("resize")}))}},{key:"keyBinds",value:function(e,t){this.utils.keyBinds(e,t)}}]),e}();a.name,l.red,l.green,l.blue;window.__typegrid=new function e(){s()(this,e);var t=this;t.snippet=r,t.config=n,t.utils=u;var i={};return i.init=function(){t.user=function(e){fetch((b()||"").replace(/typegrid.js/g,"")+a.json.file).then((function(e){if(e.ok)return e.json();throw c.get.notfound})).then(e).catch((function(){}))}((function(e){t.config[t.config.lib.json.storage]=e,t.model=new U(t.utils,t.config,t.user),t.view=new X(t.utils,t.model),t.controller=new Y(t.utils,t.model,t.view)}))},i.destroy=function(){t.utils.unlistenMediaQueries(),t.utils.uncheckWindowSize()},i.init(),{init:i.init,destroy:i.destroy}}}]);